<mp-toptips msg="{{error}}" type="error" show="{{error}}" delay="1500"></mp-toptips>
<mp-form-page title="以下信息请根据本人实际情况填写或选择">
  <mp-form id="form" rules="{{rules}}" models="{{formData}}">
    <mp-cells title="基本信息">
      <mp-cell prop="age" title="年龄">
        <input wx:if="{{mode == 'readonly'}}" disabled="true" bindinput="formInputChange" value="{{formData.age}}" data-field="age" class="weui-input" placeholder="请输入年龄" />
        <input wx:else bindinput="formInputChange" value="{{formData.age}}" data-field="age" class="weui-input" placeholder="请输入年龄" />
      </mp-cell>
      <mp-cell prop="height" title="身高(cm)">
        <input wx:if="{{mode == 'readonly'}}" disabled="true" bindinput="formInputChange" value="{{formData.height}}" data-field="height" class="weui-input" placeholder="请输入身高" />
        <input wx:else bindinput="formInputChange" value="{{formData.height}}" data-field="height" class="weui-input" placeholder="请输入身高" />
      </mp-cell>
      <mp-cell prop="weight" title="体重(kg)">
        <input wx:if="{{mode == 'readonly'}}" disabled="true" bindinput="formInputChange" value="{{formData.weight}}" data-field="weight" class="weui-input" placeholder="请输入体重" />
        <input wx:else bindinput="formInputChange" value="{{formData.weight}}" data-field="weight" class="weui-input" placeholder="请输入体重" />
      </mp-cell>
    </mp-cells>
    <mp-cells title="性别">
      <mp-checkbox-group wx:if="{{mode == 'readonly'}}" prop="gender" multi="{{false}}" bindchange="genderChange">
        <mp-checkbox wx:if="{{formData.gender == '0'}}" label="男" value="0" checked="true" disabled="true"></mp-checkbox>
        <mp-checkbox wx:else label="男" value="0" disabled="true"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.gender == '1'}}" label="女" value="1" disabled="true"></mp-checkbox>
        <mp-checkbox wx:else label="女" value="1" disabled="true"></mp-checkbox>
      </mp-checkbox-group>
      <mp-checkbox-group wx:else prop="gender" multi="{{false}}" bindchange="genderChange">
        <mp-checkbox wx:if="{{formData.gender == '0'}}" label="男" value="0" checked="true"></mp-checkbox>
        <mp-checkbox wx:else label="男" value="0"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.gender == '1'}}" label="女" value="1"></mp-checkbox>
        <mp-checkbox wx:else label="女" value="1"></mp-checkbox>
      </mp-checkbox-group>
    </mp-cells>
    <mp-cells title="生活习惯">
      <mp-checkbox-group wx:if="{{mode == 'readonly'}}" prop="checkbox" multi="{{true}}" bindchange="smokeChange">
        <mp-checkbox wx:if="{{formData.smoke}}" label="有吸烟史" value="smoke" checked="true" disabled="true"></mp-checkbox>
        <mp-checkbox wx:else label="有吸烟史" value="smoke" disabled="true"></mp-checkbox>
      </mp-checkbox-group>
      <mp-checkbox-group wx:else prop="gender" prop="checkbox" multi="{{true}}" bindchange="smokeChange">
        <mp-checkbox wx:if="{{formData.smoke}}" label="有吸烟史" value="smoke" checked="true"></mp-checkbox>
        <mp-checkbox wx:else label="有吸烟史" value="smoke"></mp-checkbox>
      </mp-checkbox-group>
    </mp-cells>
    <mp-cells title="身体指标" wx:if="{{mode == 'readonly'}}">
      <mp-cell prop="ldl-c">
        <view>低密度脂蛋白（mmol/L）</view>
        <input bindinput="formInputChange" disabled="true" value="{{formData.ldlc}}" data-field="ldlc" class="weui-input" placeholder="请输入低密度脂蛋白指标" />
      </mp-cell>
      <mp-cell prop="hdl-c">
        <view>高密度脂蛋白（mmol/L）</view>
        <input bindinput="formInputChange" disabled="true" value="{{formData.hdlc}}" data-field="hdlc" class="weui-input" placeholder="请输入高密度脂蛋白指标" />
      </mp-cell>
      <mp-cell prop="tc">
        <view>总胆固醇（mmol/L）</view>
        <input bindinput="formInputChange" disabled="true" value="{{formData.tc}}" data-field="tc" class="weui-input" placeholder="请输入总胆固醇指标" />
      </mp-cell>
      <mp-cell prop="sbp">
        <view>收缩压</view>
        <input bindinput="formInputChange" disabled="true" value="{{formData.sbp}}" data-field="sbp" class="weui-input" placeholder="请输入收缩压指标" />
      </mp-cell>
      <mp-cell prop="dbp">
        <view>舒张压</view>
        <input bindinput="formInputChange" disabled="true" value="{{formData.dbp}}" data-field="dbp" class="weui-input" placeholder="请输入舒张压指标" />
      </mp-cell>
    </mp-cells>
    <mp-cells title="身体指标" wx:else>
      <mp-cell prop="ldl-c">
        <view>低密度脂蛋白（mmol/L）</view>
        <input bindinput="formInputChange" value="{{formData.ldlc}}" data-field="ldlc" class="weui-input" placeholder="请输入低密度脂蛋白指标" />
      </mp-cell>
      <mp-cell prop="hdl-c">
        <view>高密度脂蛋白（mmol/L）</view>
        <input bindinput="formInputChange" value="{{formData.hdlc}}" data-field="hdlc" class="weui-input" placeholder="请输入高密度脂蛋白指标" />
      </mp-cell>
      <mp-cell prop="tc">
        <view>总胆固醇（mmol/L）</view>
        <input bindinput="formInputChange" value="{{formData.tc}}" data-field="tc" class="weui-input" placeholder="请输入总胆固醇指标" />
      </mp-cell>
      <mp-cell prop="sbp">
        <view>收缩压</view>
        <input bindinput="formInputChange" value="{{formData.sbp}}" data-field="sbp" class="weui-input" placeholder="请输入收缩压指标" />
      </mp-cell>
      <mp-cell prop="dbp">
        <view>舒张压</view>
        <input bindinput="formInputChange" value="{{formData.dbp}}" data-field="dbp" class="weui-input" placeholder="请输入舒张压指标" />
      </mp-cell>
    </mp-cells>
    <mp-cells title="基础疾病（多选）">
      <mp-checkbox-group wx:if="{{mode == 'readonly'}}" prop="basicDisease" multi="{{true}}" bindchange="onDiseaseChange">
        <mp-checkbox wx:if="{{formData.basicDisease.hypertension}}" checked="true" disabled="true" label="高血压" value="hypertension"></mp-checkbox>
        <mp-checkbox wx:else disabled="true" label="高血压" value="hypertension"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.diabetes}}" checked="true" disabled="true" label="糖尿病" value="diabetes"></mp-checkbox>
        <mp-checkbox wx:else disabled="true" label="糖尿病" value="diabetes"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.acuteMyocardialInfarction}}" checked="true" disabled="true" label="急性心肌梗死" value="acuteMyocardialInfarction"></mp-checkbox>
        <mp-checkbox wx:else disabled="true" label="急性心肌梗死" value="acuteMyocardialInfarction"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.unstableAngina}}" checked="true" disabled="true" label="不稳定性心绞痛" value="unstableAngina"></mp-checkbox>
        <mp-checkbox wx:else disabled="true" label="不稳定性心绞痛" value="unstableAngina"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.stableCoronaryHeartDisease}}" checked="true" disabled="true" label="稳定性冠心病" value="stableCoronaryHeartDisease"></mp-checkbox>
        <mp-checkbox wx:else disabled="true" label="稳定性冠心病" value="stableCoronaryHeartDisease"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.afterRevascularization}}" checked="true" disabled="true" label="血运重建术后" value="afterRevascularization"></mp-checkbox>
        <mp-checkbox wx:else disabled="true" label="血运重建术后" value="afterRevascularization"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.ischemicCardiomyopathy}}" checked="true" disabled="true" label="缺血性心肌病" value="ischemicCardiomyopathy"></mp-checkbox>
        <mp-checkbox wx:else disabled="true" label="缺血性心肌病" value="ischemicCardiomyopathy"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.ischemicStroke}}" checked="true" disabled="true" label="缺血性卒中" value="ischemicStroke"></mp-checkbox>
        <mp-checkbox wx:else disabled="true" label="缺血性卒中" value="ischemicStroke"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.transientIschemicAttack}}" checked="true" disabled="true" label="短暂性脑缺血发作" value="transientIschemicAttack"></mp-checkbox>
        <mp-checkbox wx:else disabled="true" label="短暂性脑缺血发作" value="transientIschemicAttack"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.carotidArteryStenosis}}" checked="true" disabled="true" label="颈动脉狭窄" value="carotidArteryStenosis"></mp-checkbox>
        <mp-checkbox wx:else disabled="true" label="颈动脉狭窄" value="carotidArteryStenosis"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.renalArteryStenosis}}" checked="true" disabled="true" label="肾动脉狭窄" value="renalArteryStenosis"></mp-checkbox>
        <mp-checkbox wx:else disabled="true" label="肾动脉狭窄" value="renalArteryStenosis"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.arterialStenosisInExtremities}}" checked="true" disabled="true" label="四肢动脉狭窄" value="arterialStenosisInExtremities"></mp-checkbox>
        <mp-checkbox wx:else disabled="true" label="四肢动脉狭窄" value="arterialStenosisInExtremities"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.abdominalAorticAneurysm}}" checked="true" disabled="true" label="腹主动脉瘤" value="abdominalAorticAneurysm"></mp-checkbox>
        <mp-checkbox wx:else disabled="true" label="腹主动脉瘤" value="abdominalAorticAneurysm"></mp-checkbox>
      </mp-checkbox-group>
      <mp-checkbox-group wx:else prop="basicDisease" multi="{{true}}" bindchange="onDiseaseChange">
        <mp-checkbox wx:if="{{formData.basicDisease.hypertension}}" checked="true" label="高血压" value="hypertension"></mp-checkbox>
        <mp-checkbox wx:else label="高血压" value="hypertension"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.diabetes}}" checked="true" label="糖尿病" value="diabetes"></mp-checkbox>
        <mp-checkbox wx:else label="糖尿病" value="diabetes"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.acuteMyocardialInfarction}}" checked="true" label="急性心肌梗死" value="acuteMyocardialInfarction"></mp-checkbox>
        <mp-checkbox wx:else label="急性心肌梗死" value="acuteMyocardialInfarction"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.unstableAngina}}" checked="true" label="不稳定性心绞痛" value="unstableAngina"></mp-checkbox>
        <mp-checkbox wx:else label="不稳定性心绞痛" value="unstableAngina"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.stableCoronaryHeartDisease}}" checked="true" label="稳定性冠心病" value="stableCoronaryHeartDisease"></mp-checkbox>
        <mp-checkbox wx:else label="稳定性冠心病" value="stableCoronaryHeartDisease"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.afterRevascularization}}" checked="true" label="血运重建术后" value="afterRevascularization"></mp-checkbox>
        <mp-checkbox wx:else label="血运重建术后" value="afterRevascularization"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.ischemicCardiomyopathy}}" checked="true" label="缺血性心肌病" value="ischemicCardiomyopathy"></mp-checkbox>
        <mp-checkbox wx:else label="缺血性心肌病" value="ischemicCardiomyopathy"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.ischemicStroke}}" checked="true" label="缺血性卒中" value="ischemicStroke"></mp-checkbox>
        <mp-checkbox wx:else label="缺血性卒中" value="ischemicStroke"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.transientIschemicAttack}}" checked="true" label="短暂性脑缺血发作" value="transientIschemicAttack"></mp-checkbox>
        <mp-checkbox wx:else label="短暂性脑缺血发作" value="transientIschemicAttack"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.carotidArteryStenosis}}" checked="true" label="颈动脉狭窄" value="carotidArteryStenosis"></mp-checkbox>
        <mp-checkbox wx:else label="颈动脉狭窄" value="carotidArteryStenosis"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.renalArteryStenosis}}" checked="true" label="肾动脉狭窄" value="renalArteryStenosis"></mp-checkbox>
        <mp-checkbox wx:else label="肾动脉狭窄" value="renalArteryStenosis"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.arterialStenosisInExtremities}}" checked="true" label="四肢动脉狭窄" value="arterialStenosisInExtremities"></mp-checkbox>
        <mp-checkbox wx:else label="四肢动脉狭窄" value="arterialStenosisInExtremities"></mp-checkbox>
        <mp-checkbox wx:if="{{formData.basicDisease.abdominalAorticAneurysm}}" checked="true" label="腹主动脉瘤" value="abdominalAorticAneurysm"></mp-checkbox>
        <mp-checkbox wx:else label="腹主动脉瘤" value="abdominalAorticAneurysm"></mp-checkbox>
      </mp-checkbox-group>
    </mp-cells>
  </mp-form>
  <view slot="button">
    <button wx:if="{{mode != 'readonly'}}" class="weui-btn" type="primary" bindtap="submitForm">确定</button>
  </view>
  <view wx:if="{{mode == 'readonly'}}">
    <view wx:if="{{ score <= 25 }}">
      <View class="score">您的当前评分：{{score}}/100</View>
      <view class="score">危险评级 : 低危（10 年动脉粥样硬化性心血管疾病发病危险小于5%）</view>
      <view>
        <view class="riskBar">
          <view class="riskMark active"></view>
          <view class="riskMark"></view>
          <view class="riskMark"></view>
          <view class="riskMark"></view>
        </view>
        <view class="riskBar">
          <view class="lowRisk">低危</view>
          <view class="mediumRisk">中危</view>
          <view class="highRisk">高危</view>
          <view class="extremeHighRisk">极高危</view>
        </view>
      </view>
    </view>
    <view wx:if="{{ 50 >= score > 25  }}">
      <View class="score">您的当前评分：{{score}}/100</View>
      <view class="score">危险评级:中危（10 年动脉粥样硬化性心血管疾病发病危险5-9%）</view>
      <view>
        <view class="riskBar">
          <view class="riskMark"></view>
          <view class="riskMark active"></view>
          <view class="riskMark"></view>
          <view class="riskMark"></view>
        </view>
        <view class="riskBar">
          <view class="lowRisk">低危</view>
          <view class="mediumRisk">中危</view>
          <view class="highRisk">高危</view>
          <view class="extremeHighRisk">极高危</view>
        </view>
      </view>
    </view>
    <view wx:if="{{ 75 >= score > 50  }}">
      <View class="score">您的当前评分：{{score}}/100</View>
      <view class="score">危险评级 :高危（10 年动脉粥样硬化性心血管疾病发病危险大于10%）</view>
      <view>
        <view class="riskBar">
          <view class="riskMark"></view>
          <view class="riskMark"></view>
          <view class="riskMark active"></view>
          <view class="riskMark"></view>
        </view>
        <view class="riskBar">
          <view class="lowRisk">低危</view>
          <view class="mediumRisk">中危</view>
          <view class="highRisk">高危</view>
          <view class="extremeHighRisk">极高危</view>
        </view>
      </view>
    </view>
    <view wx:if="{{ score > 75 }}">
      <View class="score">您的当前评分：{{score}}/100</View>
      <view class="score">危险评级：极高危（心血管疾病终生风险大于32.8%）</view>
      <view>
        <view class="riskBar">
          <view class="riskMark"></view>
          <view class="riskMark"></view>
          <view class="riskMark"></view>
          <view class="riskMark active"></view>
        </view>
        <view class="riskBar">
          <view class="lowRisk">低危</view>
          <view class="mediumRisk">中危</view>
          <view class="highRisk">高危</view>
          <view class="extremeHighRisk">极高危</view>
        </view>
      </view>
    </view>
    <view class="score">健康小提示</view>
    <view class="tips">
      <text>
        1.坚持心脏健康饮食：
        每天食盐控制在5克以内，每日摄入胆固醇应低于 300 mg
      </text>
    </view>
    <view class="tips">
      <text>
        2.规律运动：
        每周 5 -7 次，每次 30 min 以上中等量级有氧运动
      </text>
    </view>
    <view class="tips">
      <text>
        3.戒烟：
        越早戒烟，获益越大
      </text>
    </view>
    <view class="tips">
      <text>
        4.限酒：
        每日饮酒量：啤酒少于355ml，红酒少于2两，白酒少于1两
      </text>
    </view>
    <view class="tips">
      <text>
        5.保持健康体重：
        BMI= 体重（ kg ） / 身高（ m 2 ）维持在 20 - 23.9 之间
      </text>
    </view>
    <view class="tips" decode="true">
      <text decode="true">
        6.控制血脂水平：
        a.降低 LDL-C 水平作为首要的干预靶点，非-HDL-C 可作为次要干预靶点；
        b.原则上LDL-C 控制的水平越低越好，
        c.最低限度控制LDL-C&lt;1.8&nbsp;mmol/L（最好&lt;1.4mmol/L)，或非-HDL-C&lt;2.6mmol/L；
        d. LDL-C 基线值较高不能达目标值者，LDL-C 至少降低 30%；
      </text>
    </view>
    <view class="tips">
      <text>
        7.具体降脂方案在医生指导下进行
      </text>
    </view>
  </view>
</mp-form-page>